# simple-chat

Прототип интерфейса чата, реализованный в рамках тестового задания на позицию **Senior Frontend Developer (React)**.

Проект демонстрирует подход к архитектуре, работе с асинхронными данными, оптимизации производительности, real-time обновлениям и тестированию.

---

## Стек технологий

### Основные технологии

- **React 18**
- **Next.js (App Router)**
- **TypeScript**
- **Redux Toolkit**
- **RTK Query**
- **Material UI (MUI)**

### Тестирование

- **Jest**
- **React Testing Library**

---

## Обоснование выбора технологий

### Redux Toolkit + RTK Query

В качестве state management был выбран **Redux Toolkit** с **RTK Query**, так как:

- хорошо подходит для приложений с большим объёмом данных (чаты, сообщения)
- упрощает работу с асинхронными запросами и кешированием
- позволяет легко реализовать **optimistic updates**
- хорошо масштабируется под real-time сценарии (WebSocket)
- является распространённым и production-ready решением

---

### Material UI (MUI)

**Material UI** был добавлен для ускорения разработки в рамках ограниченного времени тестового задания:

- позволяет быстро собрать аккуратный и функциональный интерфейс
- предоставляет готовые, доступные и кроссбраузерные компоненты
- сокращает количество boilerplate-кода

Архитектура проекта при этом позволяет заменить UI-библиотеку без влияния на бизнес-логику.

---

### TypeScript

Используется строгая типизация для:

- повышения надёжности кода
- улучшения читаемости и поддержки
- предотвращения ошибок на этапе разработки

---

## Архитектура проекта

Проект структурирован с упором на масштабируемость и читаемость:
```
    src/
    ├── app/                 # Next.js App Router (layouts, pages)
    ├── context/             # React Context (MediaQueryProvider)
    ├── store/               # Redux Toolkit store, slices, RTK Query API
    ├── templates/           # Крупные составные компоненты (Sidebar, ChatList, DialogScreen)
    ├── ui/components/       # Переиспользуемые UI-компоненты
    ├── utils/               # Хуки, helpers, constants
```

- UI-слой изолирован от бизнес-логики
- используется публичный API модулей через `index.ts`
- компоненты и хуки легко тестируются и переиспользуются

---

## Реализованный функционал

- Экран из двух колонок:
    - список чатов
    - окно сообщений выбранного чата
- Загрузка списка чатов
- Загрузка истории сообщений выбранного чата (5000+ сообщений)
- Виртуализация списка сообщений
- Оптимистичная отправка сообщений
- Имитация real-time сообщений (mock WebSocket) раз в 10 секунд в открытом чате
- Обработка состояний загрузки и ошибок
- Адаптивный дизайн

---

## Адаптивный дизайн

Интерфейс полностью адаптивен и корректно работает на:

- Desktop
- Tablet
- Mobile

Для этого используются:
- `MediaQueryProvider`
- кастомные хуки для определения типа устройства
- адаптивная верстка компонентов

---

## Тестирование и покрытие

Проект покрыт unit-тестами с использованием **Jest** и **React Testing Library**.

### Покрытие тестами

- **Lines:** ~96%
- **Statements:** ~95%
- **Functions:** ~88%
- **Branches:** ~83%

Протестированы:
- UI-компоненты
- кастомные хуки
- context-провайдеры
- состояния загрузки и ошибок

---

## Запуск проекта

### Установка зависимостей
```bash
  npm install --legacy-peer-deps
```

### Запуск в dev-режиме
```bash
  npm run server-dev
```
Приложение будет доступно по адресу:
`http://localhost:3000`

### Запуск тестов
```bash
    npm test
```


### Запуск тестов с покрытием
```bash
    npm run test:coverage
```

## Примечания

- Архитектура проекта сделана масштабируемой намеренно, чтобы показать подход к production-приложениям
- В рамках MVP некоторые решения могут быть упрощены
- Проект реализован в рамках временных ограничений тестового задания (1–2 дня)

### Автор:
Polоzov Victor